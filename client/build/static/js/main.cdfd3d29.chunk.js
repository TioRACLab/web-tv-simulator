(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{26:function(e,t,n){},36:function(e,t,n){},55:function(e,t,n){},57:function(e,t,n){},58:function(e,t,n){},59:function(e,t,n){"use strict";n.r(t);n(26);var o=n(0),i=n.n(o),s=n(9),a=n(8),c="TV_CHANGE_VIDEO",r="TV_CHANGE_VOLUME",h="TV_CHANGE_SELECTOR",l={video:"",volume:0,selector:""},u=Object(s.b)({tvState:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case c:return Object(a.a)(Object(a.a)({},e),{},{video:t.video});case r:return Object(a.a)(Object(a.a)({},e),{},{volume:t.volume});case h:return Object(a.a)(Object(a.a)({},e),{},{selector:t.selector});default:return e}}}),v=Object(s.c)(u),d=n(10),m=n.n(d),f=n(5),g=n(14),b=n.n(g),p=n(23),j=n(2),C=n(3),V=n(7),O=n(6),S=(n(36),n(24)),w=n.n(S),T=n(25),y=function(){function e(){var t=this;Object(j.a)(this,e),this.containsSignal=function(){return t.videos&&t.videos.length>0},this.number=3,this.videos=[],this.randomVideos=[]}return Object(C.a)(e,[{key:"getNextVideo",value:function(){return this.containsSignal()?(this.randomVideos.length<=0&&(this.randomVideos=Object(T.a)(this.videos),this.randomVideos=this.randomVideos.sort((function(){return Math.random()-.5}))),this.randomVideos.shift()):k}}]),e}(),k="/videos/noSignal.mp4",x=y,E=function(){function e(t,n,o){Object(j.a)(this,e),this.channel=new x,this.volume=.7,this.select="",this.timeSelect=null,this.channels=[],this.onChangeVideoEvent=t,this.onChangeVolumeEvent=n,this.onChangeSelectorEvent=o,this.onChangeVideo(),this.onChangeVolume(),this.onChangeSelector()}return Object(C.a)(e,[{key:"updateValues",value:function(e){e.channels&&(this.channels=e.channels.map((function(e){var t=new x;return t.number=parseInt(e.number),t.videos=e.videos,t})),this.changeChannel(this.channel.number))}},{key:"upVolume",value:function(){this.volume+=.1,this.volume=parseFloat(this.volume.toFixed(1)),this.volume>1&&(this.volume=1),this.onChangeVolume()}},{key:"downVolume",value:function(){this.volume-=.1,this.volume=parseFloat(this.volume.toFixed(1)),this.volume<0&&(this.volume=0),this.onChangeVolume()}},{key:"upChannel",value:function(){if(this.channels.length>0){var e=this.channels.map((function(e){return e.number}));e.sort();for(var t=0;t<e.length;t++){var n=e[t];if(n>this.channel.number)return void this.changeChannel(n)}this.changeChannel(e[0])}else this.changeChannel(this.channel.number+1)}},{key:"downChannel",value:function(){if(this.channels.length>0){var e=this.channels.map((function(e){return e.number}));e.sort();for(var t=e.length-1;t>=0;t--){var n=e[t];if(n<this.channel.number)return void this.changeChannel(n)}this.changeChannel(e[e.length-1])}else this.changeChannel(this.channel.number+1)}},{key:"selectChannel",value:function(e){var t,n=this;this.clearTimeSelect(),this.select.length>=2&&(this.select=""),this.select+=e.toString(),(null===(t=this.select)||void 0===t?void 0:t.length)>=2?this.changeChannel(parseInt(this.select)):(this.timeSelect=setTimeout((function(){n.changeChannel(parseInt(n.select)),n.clearTimeSelect()}),3e3),this.onChangeSelector())}},{key:"changeChannel",value:function(e){var t=this.channels.filter((function(t){return t.number===e}));if(t.length<=0){var n=new x;n.number=e,this.channel=n}else this.channel=t[0];this.select=e.toString().padStart(2,"0"),this.onChangeVideo(),this.onChangeSelector()}},{key:"clearTimeSelect",value:function(){this.timeSelect&&(clearTimeout(this.timeSelect),this.timeSelect=null)}},{key:"onChangeVideo",value:function(){this.onChangeVideoEvent&&this.onChangeVideoEvent(this.channel.getNextVideo())}},{key:"onChangeVolume",value:function(){this.onChangeVolumeEvent&&this.onChangeVolumeEvent(this.volume)}},{key:"onChangeSelector",value:function(){this.onChangeSelectorEvent&&this.onChangeSelectorEvent(this.select)}}]),e}(),N=function(e){return{type:c,video:e}},D=function(e){return{type:r,volume:e}},I=function(e){return{type:h,selector:e}},A=(n(55),n(1)),F=function(e){Object(V.a)(n,e);var t=Object(O.a)(n);function n(e){var o;return Object(j.a)(this,n),(o=t.call(this,e)).onVideoEnded=function(){o.videoControl.current&&(o.videoControl.current.currentTime=0,o.videoControl.current.play()),o.props.TV.onChangeVideo()},o.videoControl=i.a.createRef(),o}return Object(C.a)(n,[{key:"render",value:function(){var e=this.props,t=e.video,n=e.volume;return this.videoControl.current&&(this.videoControl.current.volume=n),Object(A.jsx)("video",{className:"Screen",ref:this.videoControl,autoPlay:!0,onEnded:this.onVideoEnded,src:t})}}]),n}(o.Component),L=Object(f.b)((function(e){return{video:e.tvState.video,volume:e.tvState.volume}}))(F),_=(n(57),function(e){Object(V.a)(n,e);var t=Object(O.a)(n);function n(e){var o;return Object(j.a)(this,n),(o=t.call(this,e)).showLooping=function(){((new Date).getTime()-o.state.startDate.getTime())/1e3>o.showTiming&&(clearInterval(o.looping),o.looping=null,o.setState({show:!1}))},o.state={show:!1,startDate:new Date},o.showTiming=4,o.looping=null,o}return Object(C.a)(n,[{key:"show",value:function(){var e=this;setTimeout((function(){e.setState({show:!0,startDate:new Date})}),10),this.looping||(this.looping=setInterval(this.showLooping,250))}}]),n}(o.Component)),U=function(e){Object(V.a)(n,e);var t=Object(O.a)(n);function n(e){var o;Object(j.a)(this,n),(o=t.call(this,e)).getCurrentVolume=function(e){for(var t=[],n=10*e,o=0;o<10;o++)o<n?t.push("\u2588"):t.push("\u25a0");return t.join(" ")};var i=o.props.volume;return o.volume=i,o}return Object(C.a)(n,[{key:"render",value:function(){var e=this.props.volume;return this.volume!==e&&(this.volume=e,this.show()),Object(A.jsx)("div",{className:"Volume ".concat(this.state.show&&"show"),children:Object(A.jsxs)("div",{className:"volumePosition",children:[Object(A.jsx)("p",{className:"title",children:"Volume"}),Object(A.jsx)("p",{className:"current",children:this.getCurrentVolume(e)})]})})}}]),n}(_),P=Object(f.b)((function(e){return{volume:e.tvState.volume}}))(U),G=(n(58),function(e){Object(V.a)(n,e);var t=Object(O.a)(n);function n(e){var o;Object(j.a)(this,n);var i=(o=t.call(this,e)).props.selector;return o.selector=i,o}return Object(C.a)(n,[{key:"render",value:function(){var e=this.props.selector;return e&&!isNaN(e)&&this.selector!==e&&(this.selector=e,this.show()),Object(A.jsx)("div",{className:"NumberSelect ".concat(this.state.show&&"show"),children:Object(A.jsx)("p",{children:e})})}}]),n}(_)),H=Object(f.b)((function(e){return{selector:e.tvState.selector}}))(G),K=function(e){Object(V.a)(n,e);var t=Object(O.a)(n);function n(e){var o;return Object(j.a)(this,n),(o=t.call(this,e)).onKeyUp=function(e){"NumpadAdd"!==e.code&&"ArrowRight"!==e.code||o.TV.upVolume(),"NumpadSubtract"!==e.code&&"ArrowLeft"!==e.code||o.TV.downVolume(),"ArrowUp"===e.code&&o.TV.upChannel(),"ArrowDown"===e.code&&o.TV.downChannel(),e.code.includes("Digit")&&o.TV.selectChannel(parseInt(e.code[5])),e.code.includes("Numpad")&&o.TV.selectChannel(parseInt(e.code[6]))},o.startValues(),o}return Object(C.a)(n,[{key:"startValues",value:function(){var e=this.props,t=e.tvChangeVideo,n=e.tvChangeVolume,o=e.tvChangeSelector;this.TV=new E(t,n,o)}},{key:"componentDidMount",value:function(){this.getChannels()}},{key:"getChannels",value:function(){var e=Object(p.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,"/channels/channels.json",e.next=4,w.a.get("/channels/channels.json");case 4:t=e.sent,this.TV.updateValues(t.data),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("Ops!!!");case 11:case"end":return e.stop()}}),e,this,[[0,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return Object(A.jsxs)("div",{className:"TV",tabIndex:"0",onKeyUp:this.onKeyUp,children:[Object(A.jsx)(L,{TV:this.TV}),Object(A.jsx)(P,{TV:this.TV}),Object(A.jsx)(H,{TV:this.TV})]})}}]),n}(o.Component),M=Object(f.b)((function(e){return{volume:e.tvState.volume}}),(function(e){return Object(s.a)({tvChangeVideo:N,tvChangeVolume:D,tvChangeSelector:I},e)}))(K),R=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,60)).then((function(t){var n=t.getCLS,o=t.getFID,i=t.getFCP,s=t.getLCP,a=t.getTTFB;n(e),o(e),i(e),s(e),a(e)}))};m.a.render(Object(A.jsx)(f.a,{store:v,children:Object(A.jsx)(M,{})}),document.getElementById("root")),R()}},[[59,1,2]]]);
//# sourceMappingURL=main.cdfd3d29.chunk.js.map